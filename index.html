<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>シャチポケ２</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="game-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="screen">
            <div class="loading-content">
                <h1>シャチポケ２</h1>
                <div class="loading-spinner"></div>
                <p>読み込み中...</p>
            </div>
        </div>

        <!-- Character Selection Screen -->
        <div id="character-selection" class="screen hidden">
            <div class="screen-header">
                <h1>キャラクター選択</h1>
                <p>最初のキャラクターを選んでください</p>
            </div>
            <div class="character-grid" id="character-grid">
                <!-- Characters will be populated by JavaScript -->
            </div>
            <div class="character-preview" id="character-preview">
                <div class="preview-image"></div>
                <div class="preview-info">
                    <h3 id="preview-name">キャラクター名</h3>
                    <div class="preview-stats">
                        <div class="stat-item">
                            <span class="stat-icon">😤</span>
                            <span>耐ストレス: <span id="preview-stress">0</span></span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">🧠</span>
                            <span>知識: <span id="preview-knowledge">0</span></span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">💪</span>
                            <span>体力: <span id="preview-physical">0</span></span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">💬</span>
                            <span>コミュ力: <span id="preview-communication">0</span></span>
                        </div>
                    </div>
                </div>
            </div>
            <button id="confirm-character" class="btn-primary" disabled>選択確定</button>
        </div>

        <!-- Main Game Screen -->
        <div id="main-game" class="screen hidden">
            <!-- Header -->
            <div class="game-header">
                <h1>シャチポケ２</h1>
                <div class="currency-display">
                    <span class="currency-icon">🐋</span>
                    <span id="currency-amount">0</span>シャチ
                </div>
            </div>

            <!-- Character Display -->
            <div class="character-display">
                <div class="character-image" id="main-character-image">
                    <div class="character-sway"></div>
                </div>
                <div class="character-info">
                    <h2 id="character-name">キャラクター名</h2>
                    <div class="level-info">
                        <span>レベル <span id="character-level">1</span></span>
                    </div>
                </div>
            </div>

            <!-- Stats Display -->
            <div class="stats-display">
                <div class="stat-item">
                    <span class="stat-icon">😤</span>
                    <span class="stat-label">耐ストレス</span>
                    <div class="stat-bar">
                        <div class="stat-fill" id="stress-bar"></div>
                    </div>
                    <span class="stat-value" id="stress-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">🧠</span>
                    <span class="stat-label">知識</span>
                    <div class="stat-bar">
                        <div class="stat-fill" id="knowledge-bar"></div>
                    </div>
                    <span class="stat-value" id="knowledge-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">💪</span>
                    <span class="stat-label">体力</span>
                    <div class="stat-bar">
                        <div class="stat-fill" id="physical-bar"></div>
                    </div>
                    <span class="stat-value" id="physical-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">💬</span>
                    <span class="stat-label">コミュ力</span>
                    <div class="stat-bar">
                        <div class="stat-fill" id="communication-bar"></div>
                    </div>
                    <span class="stat-value" id="communication-value">0</span>
                </div>
            </div>

            <!-- Navigation -->
            <div class="main-navigation">
                <button class="nav-btn" data-screen="events">
                    <span class="nav-icon">📅</span>
                    <span>イベント</span>
                </button>
                <button class="nav-btn" data-screen="shop">
                    <span class="nav-icon">🛒</span>
                    <span>ショップ</span>
                </button>
                <button class="nav-btn" data-screen="formation">
                    <span class="nav-icon">👥</span>
                    <span>編成</span>
                </button>
                <button class="nav-btn" data-screen="settings">
                    <span class="nav-icon">⚙️</span>
                    <span>設定</span>
                </button>
            </div>
        </div>

        <!-- Events Screen -->
        <div id="events-screen" class="screen hidden">
            <div class="screen-header">
                <button class="back-btn" data-back="main">← 戻る</button>
                <h1>イベント</h1>
                <div class="event-info">
                    <span>今日のイベント: <span id="events-remaining">3</span>/3</span>
                </div>
            </div>
            <div class="events-content" id="events-content">
                <!-- Events will be populated by JavaScript -->
            </div>
        </div>

        <!-- Shop Screen -->
        <div id="shop-screen" class="screen hidden">
            <div class="screen-header">
                <button class="back-btn" data-back="main">← 戻る</button>
                <h1>ショップ</h1>
            </div>
            <div class="shop-content">
                <div class="shop-items" id="shop-items">
                    <!-- Shop items will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Formation Screen -->
        <div id="formation-screen" class="screen hidden">
            <div class="screen-header">
                <button class="back-btn" data-back="main">← 戻る</button>
                <h1>編成</h1>
            </div>
            <div class="formation-content">
                <div class="party-formation">
                    <h3>パーティー編成</h3>
                    <div class="party-slots" id="party-slots">
                        <!-- Party slots will be populated by JavaScript -->
                    </div>
                </div>
                <div class="character-collection">
                    <h3>所有キャラクター</h3>
                    <div class="owned-characters" id="owned-characters">
                        <!-- Owned characters will be populated by JavaScript -->
                    </div>
                </div>
                <div class="character-shop">
                    <h3>キャラクター購入</h3>
                    <div class="purchasable-characters" id="purchasable-characters">
                        <!-- Purchasable characters will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen hidden">
            <div class="screen-header">
                <button class="back-btn" data-back="main">← 戻る</button>
                <h1>設定</h1>
            </div>
            <div class="settings-content">
                <div class="settings-section">
                    <h3>ゲームデータ</h3>
                    <button class="btn-secondary" id="save-game">ゲームを保存</button>
                    <button class="btn-secondary" id="load-game">ゲームを読み込み</button>
                    <button class="btn-danger" id="reset-game">ゲームをリセット</button>
                </div>
                <div class="settings-section">
                    <h3>動画ギャラリー</h3>
                    <div class="video-gallery" id="video-gallery">
                        <!-- Videos will be populated by JavaScript -->
                    </div>
                </div>
                <div class="settings-section">
                    <h3>ゲーム統計</h3>
                    <div class="game-stats" id="game-stats">
                        <!-- Stats will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for confirmations -->
        <div id="modal" class="modal hidden">
            <div class="modal-content">
                <h3 id="modal-title">確認</h3>
                <p id="modal-message">実行しますか？</p>
                <div class="modal-buttons">
                    <button class="btn-secondary" id="modal-cancel">キャンセル</button>
                    <button class="btn-primary" id="modal-confirm">確認</button>
                </div>
            </div>
        </div>

        <!-- Toast notifications -->
        <div id="toast-container"></div>
    </div>

    <script>
        // エラーハンドリング
        window.addEventListener('error', function(e) {
            console.error('Script error:', e.error);
            document.body.innerHTML = '<div style="padding: 20px; text-align: center;"><h1>エラーが発生しました</h1><p>ページを再読み込みしてください。</p><button onclick="location.reload()">再読み込み</button></div>';
        });
    </script>
    <script src="game-data.js"></script>
    <script src="game-state.js"></script>
    <script src="game-ui.js"></script>
    <script src="main.js"></script>
</body>
</html>
