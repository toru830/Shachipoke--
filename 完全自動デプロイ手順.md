# 🚀 完全自動デプロイ手順

## ✅ 準備完了！以下の3ステップで完了します

---

## 📝 ステップ1: ローカルGitセットアップ（30秒）

**最も簡単な方法：**

1. **エクスプローラーでプロジェクトフォルダを開く**
2. **`実行してください.bat` をダブルクリック**
3. 完了するまで待つ

**または、コマンドプロンプトで：**

```bash
実行してください.bat
```

これで、Gitリポジトリが初期化され、すべてのファイルがコミットされます。

---

## 🌐 ステップ2: GitHubにプッシュ（5分）

### 2-1. GitHubでリポジトリを作成

1. ブラウザで https://github.com/new を開く
2. リポジトリ名を入力（例: `syachipoke2`）
3. **Public** または **Private** を選択
4. **「Create repository」をクリック**

### 2-2. ローカルリポジトリをGitHubにプッシュ

コマンドプロンプトまたはPowerShellで、プロジェクトフォルダで以下を実行：

```bash
git remote add origin https://github.com/あなたのユーザー名/リポジトリ名.git
git branch -M main
git push -u origin main
```

**注意：** 
- `あなたのユーザー名` をGitHubのユーザー名に置き換えてください
- `リポジトリ名` を上で作成したリポジトリ名に置き換えてください
- 初回プッシュ時、GitHubの認証を求められる場合があります

---

## ☁️ ステップ3: Cloudflare Pagesでデプロイ（10分）

### 3-1. Cloudflare Pagesに接続

1. **Cloudflareダッシュボードにログイン**
   - https://dash.cloudflare.com にアクセス
   - ログイン（アカウントがない場合は無料で作成）

2. **Pagesプロジェクトを作成**
   - 左サイドバーから **「Pages」** を選択
   - **「Create a project」** または **「接続する」** をクリック
   - **「Connect to Git」** を選択

3. **GitHubリポジトリを接続**
   - **「GitHub」** を選択
   - GitHubの認証を許可（必要に応じて）
   - 作成したリポジトリ（`syachipoke2`）を選択
   - **「Begin setup」** をクリック

### 3-2. ビルド設定

以下の設定を入力：

- **Project name**: `syachipoke2`（任意の名前）
- **Production branch**: `main`
- **Build command**: （**空欄のまま**）
- **Build output directory**: `/`（**スラッシュのみ**）
- **Root directory**: （空欄のまま）

### 3-3. デプロイ実行

1. **「Save and Deploy」** をクリック
2. デプロイが完了するまで待つ（通常1-2分）
3. デプロイが完了すると、URLが表示されます
   - 例: `https://syachipoke2.pages.dev`

### 3-4. Supabase設定（重要！）

**認証が動作するように、Supabaseの設定を更新します：**

1. **Supabaseダッシュボードにログイン**
   - https://supabase.com/dashboard にアクセス

2. **プロジェクトを選択**
   - 使用中のSupabaseプロジェクトを選択

3. **認証設定を更新**
   - 左サイドバー → **「Authentication」** → **「URL Configuration」**
   - **「Redirect URLs」** セクションに以下を追加：
     ```
     https://syachipoke2.pages.dev/*
     https://syachipoke2.pages.dev/auth-callback.html
     ```
     （実際のプロジェクト名に合わせて変更してください）
   
   - **「Site URL」** を更新：
     ```
     https://syachipoke2.pages.dev
     ```
     （実際のプロジェクト名に合わせて変更してください）

4. **「Save」** をクリック

---

## 🎉 完了！

デプロイが完了すると、ゲームがオンラインでアクセス可能になります！

### 確認方法

1. Cloudflare Pagesで表示されたURL（例: `https://syachipoke2.pages.dev`）にアクセス
2. ゲームが正常に読み込まれることを確認
3. 認証機能（Googleログインなど）をテスト

---

## 🔄 今後の更新方法

コードを更新したら、以下のコマンドで自動的に再デプロイされます：

```bash
git add .
git commit -m "更新内容の説明"
git push
```

Cloudflare Pagesが自動的に変更を検知して、新しいデプロイが開始されます。

---

## 💡 トラブルシューティング

### Gitコマンドが動作しない
- Gitをインストール: https://git-scm.com/download/win
- インストール後、コマンドプロンプトを再起動

### GitHubへのプッシュが失敗する
- GitHubの認証情報が正しいか確認
- リモートURLが正しいか確認: `git remote -v`

### Cloudflare Pagesのデプロイが失敗する
- 「Deployments」タブでログを確認
- すべてのファイルがGitにコミットされているか確認

### 認証が動作しない
- SupabaseのRedirect URLsに正しいURLが設定されているか確認
- ブラウザのコンソール（F12）でエラーを確認

---

## 📚 参考ドキュメント

- **README_DEPLOY.md** - デプロイの概要
- **DEPLOY_STEPS.md** - 詳細なステップバイステップガイド
- **CLOUDFLARE_DEPLOYMENT_GUIDE.md** - 包括的なCloudflare Pagesガイド

---

**何か問題があれば、エラーメッセージと一緒に確認してください！**

